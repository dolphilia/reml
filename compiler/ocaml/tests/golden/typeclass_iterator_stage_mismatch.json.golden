{
  "diagnostics": [
    {
      "severity": "error",
      "message": "Iterator Capability が要求された Stage を満たしていません",
      "schema_version": "2.0.0-draft",
      "location": {
        "file": "iter.reml",
        "line": 4,
        "column": 3,
        "endLine": 4,
        "endColumn": 18
      },
      "code": "typeclass.iterator.stage_mismatch",
      "codes": [ "typeclass.iterator.stage_mismatch" ],
      "domain": "type",
      "timestamp": "1970-01-01T00:00:00Z",
      "notes": [
        "要求 Stage: beta / Capability Stage: experimental (core.iterator.collect)"
      ],
      "extensions": {
        "diagnostic.v2": {
          "timestamp": "1970-01-01T00:00:00Z",
          "codes": [ "typeclass.iterator.stage_mismatch" ]
        },
        "effects": {
          "capability": "core.iterator.collect",
          "stage": { "required": "beta", "actual": "experimental" },
          "residual": {
            "missing_ops": [ "Iterator::next", "Iterator::size_hint" ]
          },
          "provider": "Core.Iter",
          "manifest_path": "dsl/core.iter.toml",
          "metadata": {
            "provider": "core.iter",
            "last_verified_at": "2025-10-21T03:15:00Z"
          },
          "iterator": {
            "required": "at_least:beta",
            "actual": "experimental",
            "kind": "custom:iterator.snapshot",
            "capability": "core.iterator.collect",
            "source": "dsl/core.iter.toml"
          }
        },
        "effect.stage.required": "beta",
        "effect.stage.actual": "experimental",
        "effect.stage.capability": "core.iterator.collect",
        "typeclass": {
          "trait": "Iterator",
          "type_args": [ "SampleStream", "SampleItem" ],
          "constraint": "Iterator<SampleStream, SampleItem>",
          "resolution_state": "stage_mismatch",
          "dictionary": {
            "kind": "none",
            "identifier": null,
            "trait": null,
            "type_args": [],
            "repr": null
          },
          "candidates": [],
          "pending": [],
          "generalized_typevars": [],
          "graph": { "export_dot": null },
          "stage": null
        },
        "typeclass.trait": "Iterator",
        "typeclass.type_args": [ "SampleStream", "SampleItem" ],
        "typeclass.constraint": "Iterator<SampleStream, SampleItem>",
        "typeclass.resolution_state": "stage_mismatch",
        "typeclass.dictionary": {
          "kind": "none",
          "identifier": null,
          "trait": null,
          "type_args": [],
          "repr": null
        },
        "typeclass.candidates": [],
        "typeclass.pending": [],
        "typeclass.generalized_typevars": [],
        "typeclass.graph.export_dot": null,
        "typeclass.span.start": 42,
        "typeclass.span.end": 57,
        "typeclass.dictionary.kind": "none",
        "typeclass.dictionary.identifier": null,
        "typeclass.dictionary.trait": null,
        "typeclass.dictionary.type_args": [],
        "typeclass.dictionary.repr": null
      },
      "audit_metadata": {
        "effect.stage.required": "beta",
        "effect.stage.actual": "experimental",
        "effect.capability": "core.iterator.collect",
        "effect.residual": {
          "missing_ops": [ "Iterator::next", "Iterator::size_hint" ]
        },
        "effect.provider": "Core.Iter",
        "effect.manifest_path": "dsl/core.iter.toml",
        "effect.capability_metadata": {
          "provider": "core.iter",
          "last_verified_at": "2025-10-21T03:15:00Z"
        },
        "effect.stage.iterator.required": "at_least:beta",
        "effect.stage.iterator.actual": "experimental",
        "effect.stage.iterator.kind": "custom:iterator.snapshot",
        "effect.stage.iterator.capability": "core.iterator.collect",
        "effect.stage.iterator.source": "dsl/core.iter.toml",
        "cli.audit_id": "11111111-1111-1111-1111-111111111111",
        "cli.change_set": {
          "command": "stage-diagnostic-test",
          "input": "iter.reml"
        },
        "schema.version": "1.1",
        "audit.timestamp": "1970-01-01T00:00:00Z",
        "typeclass.trait": "Iterator",
        "typeclass.type_args": [ "SampleStream", "SampleItem" ],
        "typeclass.constraint": "Iterator<SampleStream, SampleItem>",
        "typeclass.resolution_state": "stage_mismatch",
        "typeclass.dictionary": {
          "kind": "none",
          "identifier": null,
          "trait": null,
          "type_args": [],
          "repr": null
        },
        "typeclass.candidates": [],
        "typeclass.pending": [],
        "typeclass.generalized_typevars": [],
        "typeclass.graph.export_dot": null,
        "typeclass.span.start": 42,
        "typeclass.span.end": 57,
        "typeclass.dictionary.kind": "none",
        "typeclass.dictionary.identifier": null,
        "typeclass.dictionary.trait": null,
        "typeclass.dictionary.type_args": [],
        "typeclass.dictionary.repr": null
      },
      "audit": {
        "metadata": {
          "typeclass.dictionary.repr": null,
          "typeclass.dictionary.type_args": [],
          "typeclass.dictionary.trait": null,
          "typeclass.dictionary.identifier": null,
          "typeclass.dictionary.kind": "none",
          "typeclass.span.end": 57,
          "typeclass.span.start": 42,
          "typeclass.graph.export_dot": null,
          "typeclass.generalized_typevars": [],
          "typeclass.pending": [],
          "typeclass.candidates": [],
          "typeclass.dictionary": {
            "kind": "none",
            "identifier": null,
            "trait": null,
            "type_args": [],
            "repr": null
          },
          "typeclass.resolution_state": "stage_mismatch",
          "typeclass.constraint": "Iterator<SampleStream, SampleItem>",
          "typeclass.type_args": [ "SampleStream", "SampleItem" ],
          "typeclass.trait": "Iterator",
          "cli.change_set": {
            "command": "stage-diagnostic-test",
            "input": "iter.reml"
          },
          "cli.audit_id": "11111111-1111-1111-1111-111111111111",
          "effect.stage.iterator.source": "dsl/core.iter.toml",
          "effect.stage.iterator.capability": "core.iterator.collect",
          "effect.stage.iterator.kind": "custom:iterator.snapshot",
          "effect.stage.iterator.actual": "experimental",
          "effect.stage.iterator.required": "at_least:beta",
          "effect.capability_metadata": {
            "provider": "core.iter",
            "last_verified_at": "2025-10-21T03:15:00Z"
          },
          "effect.manifest_path": "dsl/core.iter.toml",
          "effect.provider": "Core.Iter",
          "effect.residual": {
            "missing_ops": [ "Iterator::next", "Iterator::size_hint" ]
          },
          "effect.capability": "core.iterator.collect",
          "effect.stage.actual": "experimental",
          "effect.stage.required": "beta",
          "audit.timestamp": "1970-01-01T00:00:00Z",
          "schema.version": "1.1"
        },
        "audit_id": "11111111-1111-1111-1111-111111111111",
        "change_set": {
          "command": "stage-diagnostic-test",
          "input": "iter.reml"
        }
      }
    }
  ]
}

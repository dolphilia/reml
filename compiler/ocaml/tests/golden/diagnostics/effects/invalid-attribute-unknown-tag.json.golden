{
  "diagnostics": [
    {
      "audit": {
        "metadata": {
          "effect.stage.required": "at_least:stable",
          "effect.stage.actual": "stable",
          "effect.capability": "runtime",
          "effect.attribute.invalid": "attribute",
          "effect.attribute.location": "demo",
          "effect.attribute.reason": "unknown_effect_tag",
          "stage_trace": [
            {
              "source": "cli_option",
              "note": "not provided"
            },
            {
              "source": "env_var",
              "note": "REMLC_EFFECT_STAGE not set"
            },
            {
              "source": "typer",
              "stage": "stable"
            }
          ],
          "schema.version": "1.1",
          "audit.timestamp": "1970-01-01T00:00:00Z",
          "audit.policy.version": "phase2.5.audit.v1",
          "audit.channel": "cli",
          "audit.build_id": "19700101T000000Z",
          "audit.sequence": 0,
          "audit.source.workspace": ".",
          "cli.audit_id": "cli/19700101T000000Z#0",
          "cli.change_set": {
            "policy": "phase2.5.audit.v1",
            "origin": "cli",
            "source": {
              "build_id": "19700101T000000Z",
              "workspace": ".",
              "sequence": 0
            },
            "items": [
              {
                "kind": "cli-command",
                "command": "effects-invalid-attribute"
              },
              {
                "kind": "input",
                "path": "<入力>"
              }
            ]
          },
          "event.domain": "type",
          "event.kind": "effects.syntax.invalid_attribute",
          "effect.required_capabilities": [
            "runtime"
          ],
          "effect.stage.required_capabilities": [
            "runtime"
          ],
          "effect.actual_capabilities": [
            {
              "capability": "runtime",
              "stage": "stable"
            }
          ],
          "effect.stage.actual_capabilities": [
            {
              "capability": "runtime",
              "stage": "stable"
            }
          ],
          "effect.stage.capabilities": [
            {
              "capability": "runtime",
              "stage": "stable"
            }
          ],
          "effect.capabilities": [
            "runtime"
          ]
        },
        "audit_id": "cli/19700101T000000Z#0",
        "change_set": {
          "policy": "phase2.5.audit.v1",
          "origin": "cli",
          "source": {
            "build_id": "19700101T000000Z",
            "workspace": ".",
            "sequence": 0
          },
          "items": [
            {
              "kind": "cli-command",
              "command": "effects-invalid-attribute"
            },
            {
              "kind": "input",
              "path": "<入力>"
            }
          ]
        }
      },
      "extensions": {
        "effects": {
          "diagnostic_payload": {
            "invalid_attributes": [
              {
                "attribute": "@allows_effects(true)",
                "attribute_name": "allows_effects",
                "reason": "unknown_effect_tag",
                "key": null,
                "provided": true,
                "provided_display": "true"
              }
            ],
            "residual_leaks": []
          },
          "invalid_attributes": [
            {
              "attribute": "@allows_effects(true)",
              "attribute_name": "allows_effects",
              "reason": "unknown_effect_tag",
              "key": null,
              "provided": true,
              "provided_display": "true"
            }
          ],
          "stage": {
            "required": "at_least:stable",
            "actual": "stable"
          },
          "provided": true,
          "expected": "効果タグは識別子または文字列で指定してください",
          "attribute": "@allows_effects(true)",
          "stage_trace": [
            {
              "source": "cli_option",
              "note": "not provided"
            },
            {
              "source": "env_var",
              "note": "REMLC_EFFECT_STAGE not set"
            },
            {
              "source": "typer",
              "stage": "stable"
            }
          ],
          "provided_display": "true",
          "capabilities": [
            "runtime"
          ],
          "required_capabilities": [
            "runtime"
          ],
          "actual_capabilities": [
            {
              "capability": "runtime",
              "stage": "stable"
            }
          ],
          "capabilities_detail": [
            {
              "capability": "runtime",
              "stage": "stable"
            }
          ]
        },
        "effect.stage.required": "at_least:stable",
        "effect.stage.actual": "stable",
        "effect.stage.capability": "runtime",
        "effect.stage.subject": "demo",
        "effect.stage_trace": [
          {
            "source": "cli_option",
            "note": "not provided"
          },
          {
            "source": "env_var",
            "note": "REMLC_EFFECT_STAGE not set"
          },
          {
            "source": "typer",
            "stage": "stable"
          }
        ],
        "effect.invalid_attributes": [
          {
            "attribute": "@allows_effects(true)",
            "attribute_name": "allows_effects",
            "reason": "unknown_effect_tag",
            "key": null,
            "provided": true,
            "provided_display": "true"
          }
        ],
        "effect.required_capabilities": [
          "runtime"
        ],
        "effect.actual_capabilities": [
          {
            "capability": "runtime",
            "stage": "stable"
          }
        ],
        "effect.stage.required_capabilities": [
          "runtime"
        ],
        "effect.stage.actual_capabilities": [
          {
            "capability": "runtime",
            "stage": "stable"
          }
        ]
      },
      "notes": [
        "効果タグは識別子または文字列で指定してください",
        "指定された効果タグ: true"
      ],
      "domain": "type",
      "code": "effects.syntax.invalid_attribute",
      "severity": "error",
      "message": "効果属性 @allows_effects(true) は無効です",
      "location": {
        "file": "<入力>",
        "line": 1,
        "column": 17,
        "endLine": 1,
        "endColumn": 21
      },
      "timestamp": "1970-01-01T00:00:00Z",
      "audit_metadata": {
        "effect.stage.required": "at_least:stable",
        "effect.stage.actual": "stable",
        "effect.capability": "runtime",
        "effect.attribute.invalid": "attribute",
        "effect.attribute.location": "demo",
        "effect.attribute.reason": "unknown_effect_tag",
        "stage_trace": [
          {
            "source": "cli_option",
            "note": "not provided"
          },
          {
            "source": "env_var",
            "note": "REMLC_EFFECT_STAGE not set"
          },
          {
            "source": "typer",
            "stage": "stable"
          }
        ],
        "schema.version": "1.1",
        "audit.timestamp": "1970-01-01T00:00:00Z",
        "audit.policy.version": "phase2.5.audit.v1",
        "audit.channel": "cli",
        "audit.build_id": "19700101T000000Z",
        "audit.sequence": 0,
        "audit.source.workspace": ".",
        "cli.audit_id": "cli/19700101T000000Z#0",
        "cli.change_set": {
          "policy": "phase2.5.audit.v1",
          "origin": "cli",
          "source": {
            "build_id": "19700101T000000Z",
            "workspace": ".",
            "sequence": 0
          },
          "items": [
            {
              "kind": "cli-command",
              "command": "effects-invalid-attribute"
            },
            {
              "kind": "input",
              "path": "<入力>"
            }
          ]
        },
        "event.domain": "type",
        "event.kind": "effects.syntax.invalid_attribute",
        "effect.required_capabilities": [
          "runtime"
        ],
        "effect.stage.required_capabilities": [
          "runtime"
        ],
        "effect.actual_capabilities": [
          {
            "capability": "runtime",
            "stage": "stable"
          }
        ],
        "effect.stage.actual_capabilities": [
          {
            "capability": "runtime",
            "stage": "stable"
          }
        ],
        "effect.stage.capabilities": [
          {
            "capability": "runtime",
            "stage": "stable"
          }
        ],
        "effect.capabilities": [
          "runtime"
        ]
      }
    }
  ]
}

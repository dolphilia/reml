{
  "diagnostics": [
    {
      "code": "effects.syntax.invalid_attribute",
      "severity": "error",
      "domain": "型システム",
      "message": "効果属性 @requires_capability(stage = 123) は無効です",
      "notes": [],
      "location": {
        "file": "effectful_sum.reml",
        "line": 1,
        "column": 1,
        "endLine": 1,
        "endColumn": 1
      },
      "extensions": {
        "effects": {
          "attribute": "@requires_capability(stage = 123)",
          "expected": "stage は文字列または StageId",
          "provided": 123,
          "stage": {
            "required": null,
            "actual": null
          },
          "stage_trace": [
            {
              "source": "cli_option",
              "stage": null,
              "note": "not provided"
            },
            {
              "source": "env_var",
              "stage": null,
              "note": "REMLC_EFFECT_STAGE not set"
            },
            {
              "source": "typer",
              "stage": null,
              "capability": null,
              "note": "invalid attribute"
            }
          ]
        }
      },
      "audit": {
        "effect.attribute.invalid": "stage",
        "effect.attribute.location": "fn demo",
        "effect.stage.required": null,
        "effect.stage.actual": null,
        "stage_trace": [
          {
            "source": "typer",
            "stage": null,
            "note": "attribute parsing failure"
          }
        ]
      }
    }
  ]
}

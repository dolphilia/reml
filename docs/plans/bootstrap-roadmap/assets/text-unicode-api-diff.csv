module,api,signature,effects,effect.transfer,spec_ref,impl_status,notes
Bytes,from_vec,"Result<Bytes, UnicodeError> from_vec(Vec<u8>)",effect {mem},transfer=true,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`compiler/runtime/src/text/bytes.rs` で所有権ムーブを実装済み。`effect {mem}` 計測と DecodePolicy 分岐は今後追加
Bytes,to_string,"Result<String, UnicodeError> to_string(Bytes)",effect {unicode},,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`Bytes::into_string` が `Str::owned` を経由して `String` を返す。`UnicodeErrorKind` の細分化と effect 測定が残件
Bytes,decode_utf8,"Result<Str, UnicodeError> decode_utf8(&Bytes, DecodePolicy)",effect {unicode},,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`decode_utf8/into_utf8` で UTF-8 検証を実装済み。DecodePolicy/EffectSet 接続が未実装
Bytes,slice,"Result<Bytes, UnicodeError> slice(&Bytes, Range<usize>)",@pure,,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,範囲チェックと `UnicodeErrorKind::InvalidRange` を実装済み。コピー時の `effect {mem}` 計測が残件
Str,as_bytes,Bytes as_bytes(Str),@pure,,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`Str::to_bytes` がコピー経路を提供。ゼロコピー共有と effect 測定を追加予定
Str,str_from_slice,"Result<Str, UnicodeError> from_slice(Bytes)",@pure,,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`Str::from_bytes` が `Bytes::into_utf8` を呼び出す。DecodePolicy/所有権トレースの反映は未着手
Str,grapheme_seq,"Result<GraphemeSeq, UnicodeError> grapheme_seq(Str)",effect {unicode},,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`segment_graphemes(Str)` を `compiler/runtime/src/text/grapheme.rs` に追加。Result 型や effect {unicode} は今後整備
Str,iter_graphemes,Iter<Grapheme> iter_graphemes(Str),effect {unicode},,docs/spec/3-3-core-text-unicode.md#41-grapheme--word--sentence-境界,PoC,`Str::iter_graphemes` を実装し unicode-segmentation のラッパを返す（`compiler/runtime/src/text/str_ref.rs`）
Str,len_bytes,usize len_bytes(Str),@pure,,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,Implemented,`Str::len_bytes` を公開済み。`grapheme_len` など追加 API は別タスク
String,to_bytes,"Result<Bytes, UnicodeError> to_bytes(&String)",effect {mem},"transfer=true (into_bytes)",docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`String::to_bytes`/`into_bytes` を追加。`EffectSet` の `mem_bytes` 計測と `try_reserve` 例外化は未着手
String,string_clone,String string_clone(Str),effect {mem},,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`impl From<Str> for text::String` で `Str` からの複製を提供。効果タグ・CollectError 連携は未整備
String,push_str,"Result<(), UnicodeError> push_str(&mut String, Str)",effect {mem} {unicode},,docs/spec/3-3-core-text-unicode.md#2-文字列型の層構造,PoC,`String::push_str` を公開済み。`Str` 専用ラッパと effect 計測が残件
String,normalize,"Result<String, UnicodeError> normalize(String, NormalizationForm)",effect {unicode},,docs/spec/3-3-core-text-unicode.md#31-正規化-api,PoC,`unicode-normalization` を利用し `text/normalize.rs` に実装。`UnicodeErrorKind::DecodeFailure` への変換は TODO
GraphemeSeq,segment_graphemes,GraphemeSeq segment_graphemes(Str),effect {unicode},,docs/spec/3-3-core-text-unicode.md#41-grapheme--word--sentence-境界,Implemented,`unicode-segmentation` + `unicode-width` に ScriptCategory/TextDirection の判定と `GraphemeSeq::iter`/`IntoIterator` を加え、`log_grapheme_stats` が script/direction 指標と cache 世代を出力する。`tests/grapheme_conformance.rs` で UAX #29 サブセットを検証
GraphemeSeq,width,usize width(&GraphemeSeq),@pure,,docs/spec/3-3-core-text-unicode.md#41-grapheme--word--sentence-境界,Implemented,"`GraphemeSeq::total_display_width`/`stats` が script mix ratio, `rtl_ratio`, `primary_script` を返し、Diagnostics/`width_map` が同じ指標を参照できるよう random access API (`byte_offset_at`, `grapheme_at_byte_offset`) を追加済み"
TextBuilder,builder,TextBuilder builder(),effect {mem},,docs/spec/3-3-core-text-unicode.md#6-テキスト構築とビルダー,Implemented,`compiler/runtime/src/text/builder.rs` に `TextBuilder::new/with_capacity` を実装済み（`EffectSet` 初期化あり）
TextBuilder,append,"Result<(), UnicodeError> append(&mut TextBuilder, Str)",effect {mem} {mut} {unicode},,docs/spec/3-3-core-text-unicode.md#6-テキスト構築とビルダー,Implemented,`push_bytes`/`push_str` が `Str`/`Bytes` 連結を提供。今後 `UnicodeErrorKind` を細分化予定
TextBuilder,push_grapheme,"Result<(), UnicodeError> push_grapheme(&mut TextBuilder, Grapheme)",effect {mem} {mut} {unicode},,docs/spec/3-3-core-text-unicode.md#6-テキスト構築とビルダー,Implemented,`TextBuilder::push_grapheme` でクラスタ連結と `EffectSet` 更新を実装済み
TextBuilder,reserve,"Result<(), UnicodeError> reserve(&mut TextBuilder, usize)",effect {mem} {mut},,docs/spec/3-3-core-text-unicode.md#6-テキスト構築とビルダー,Implemented,`reserve` が `EffectSet::record_mem_bytes` を呼び出しメモリ確保を計測
TextBuilder,finish,"Result<String, UnicodeError> finish(TextBuilder)",effect {mem},transfer=true,docs/spec/3-3-core-text-unicode.md#6-テキスト構築とビルダー,Implemented,`finish_with_effects`/`finish` で `Bytes::from_vec` → `String` へゼロコピー移譲を実装済み
Core.Iter,collect_text,"Result<Text, UnicodeError> collect_text(Iter<Grapheme>)",effect {mem},,docs/spec/3-1-core-prelude-iteration.md#collectors,Missing,TextBuilder/Bytes が欠落しているためコレクタの着手条件を満たせない

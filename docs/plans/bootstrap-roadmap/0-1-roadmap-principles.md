# 0.1 ブートストラップ計画の基本原則

Reml 本体のブートストラップ計画は、[0-1-project-purpose.md](../../spec/0-1-project-purpose.md) で定義された価値観を実装ロードマップに具体化するための指針です。本章では計画書全体が従うべき優先順位と判断基準を明文化し、各フェーズで妥協できない条件を共有します。

## 0.1.1 性能と安全性の両立
- **性能指標の継承**: 解析速度 O(n)・メモリ使用量 2×入力以下・50MB までのスケーラビリティという最優先要件を、MVP からセルフホスト移行後まで一貫して検証する。性能測定は `docs/guides/llvm-integration-notes.md` のパイプライン各段階で実施し、観測値は計画書 2 系列で追跡する。
- **安全性ゲート**: 型安全・メモリ安全・例外制御に関する契約（`Result` ベースのエラーハンドリング、RC 所有権モデル）は Chapter 3（`3-8`, `3-9`）と矛盾してはならない。段階的に `effect` タグと Capability 監査（[3-6-core-diagnostics-audit.md](../../spec/3-6-core-diagnostics-audit.md)）を導入し、Unsafe 機能はステージ昇格テーブルに基づいて解禁する。

## 0.1.2 開発者体験と段階的習得
- **段階的習得モデルの適用**: 30 分での基本利用・1 日での DSL プロトタイプ・上級機能の段階的拡張という学習モデルを、コンパイラ実装チームにも適用する。Phase 1 では最小構文セットで統合し、Phase 2 以降で代数的効果や高度な型機能を段階解禁する。
- **エラーメッセージ品質**: [2-5-error.md](../../spec/2-5-error.md) と [3-6-core-diagnostics-audit.md](../../spec/3-6-core-diagnostics-audit.md) の診断仕様に従い、ブートストラップ中もユーザー向け診断改善を後回しにしない。計画書では各フェーズに最低限の診断達成基準を設ける。

## 0.1.3 Capability Stage と実行環境の整合
- **Stage 契約の遵守**: [3-8-core-runtime-capability.md](../../spec/3-8-core-runtime-capability.md) の Stage 区分（`Experimental`→`Preview`→`Stable`）をロードマップに直結させ、Capability 昇格条件をフェーズ定義の一部として記載する。Stage Mismatch が検出された場合はフェーズを進めない。
- **Runtime Bridge と FFI**: `docs/guides/llvm-integration-notes.md` と [3-9-core-async-ffi-unsafe.md](../../spec/3-9-core-async-ffi-unsafe.md) で規定された RC 所有権・呼出規約・監査ログの要件を、Phase 3 以降でセルフホストと同時に満たす。ブートストラップ段階での一時的な例外は、根拠とリミットを明記し、フォローアップを Phase 4 の必須タスクに登録する。

## 0.1.4 意思決定とフィードバックループ
- **意思決定手順**: [0-1-project-purpose.md](../../spec/0-1-project-purpose.md) §2 の比較フレームワーク（短期/長期・性能/安全性のトレードオフ）をロードマップ検討会で毎回適用し、決定理由と却下理由を本計画書の付録（3 系列）に記録する。
- **仕様フィードバック**: 計画フェーズで仕様の不足・矛盾を発見した場合は、該当する仕様書を即座に更新し、計画書側には更新差分と影響範囲を脚注として残す。計画書の新規タスクが仕様書の追補を要求する場合は、対象章と更新期限を明示する。

## 0.1.5 調査と監査ログの可観測性
- **測定可能な基準**: すべてのマイルストーンに対して、測定指標（性能、診断、Stage、互換性）を定義し、その観測方法を `docs/notes/llvm-spec-status-survey.md` のフォーマットに倣って整理する。
- **監査ログ反映**: Runtime/Capability/Diagnostics の監査情報は [3-6-core-diagnostics-audit.md](../../spec/3-6-core-diagnostics-audit.md) に定義されたキーを使用し、ブートストラップ段階からログ整合性を確認する。計画書ではログ収集とレビュー手順を義務として記載する。

## 0.1.6 非破壊的かつ段階的な導入
- **非破壊性の原則**: 既存の仕様・ガイドを無効化する変更は避け、互換性が壊れる場合は移行期間と後方互換レイヤを定義する。セルフホスト移行時も OCaml 実装を段階的にリタイアし、検証済みの互換チェックリスト（Phase 4）を通過するまでは維持する。
- **段階的導入**: 新しいツールチェーン要素（ビルドシステム、テストランナー等）は、まず MVP 向けに Optional として導入し、安定化後に必須化する。

---

上記の原則は、本計画書に含まれるすべての 0.x および 2.x 系列文書の前提とする。各フェーズの具体的タスクは第 2 章以降で詳述し、ここで定義した優先順位が満たされているかをチェックリストとして明示する。

# 1.1 Core.Cli 計画

## 背景
- DSL のコンパイラ/インタプリタは CLI を前提とするが、`Core.Env` だけでは宣言的な引数定義が難しい。
- 既存計画では CLI 作成のガイドが不足し、実装のばらつきが生じやすい。

## 目的
- 型安全な CLI 定義を標準化し、DSL ツールの一貫した UX を提供する。
- 生成されるヘルプ/使用法が統一され、回帰テストの対象として扱えるようにする。

## 仕様スコープ
- フラグ/引数/サブコマンドの宣言的ビルダー。
- `Core.Env` と連携する引数解決とエラー表示の統一。
- 型付きレコードへの自動マッピング。

## 仕様更新
- 新設: `docs/spec/3-12-core-cli.md`
- 更新: `docs/spec/3-0-core-library-overview.md`
- 連携: `docs/spec/3-10-core-env.md`（環境取得との役割分担）

## ガイド/サンプル
- 新設: `docs/guides/tooling/cli-authoring.md`
- サンプル方針: DSL 用 CLI のサンプル（解析/フォーマット/検証）を `examples/` に整理する。

## リスクと対策
- **オプションの互換性**: 将来の拡張に備え、`CliSpec` のバージョニングと非推奨フローを定義する。
- **診断のばらつき**: `Core.Diagnostics` と統一したエラー出力ルールを `Core.Cli` で採用する。

## 成果物
- `Core.Cli` API の仕様ドラフト
- CLI エラー/ヘルプ出力のテンプレート案
- Phase 4 回帰向け CLI サンプル導線

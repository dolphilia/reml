# 0.3 ロールバック計画

## 想定リスク
- 更新した Rust で `compiler/` の一部クレートがビルド不能になる。
- 依存クレートの更新が想定外の破壊的変更を含む。

## 修正優先の方針
- ロールバックは最終手段とし、まず最新ツールチェーンのまま問題を解消する。
- 対応優先度は「コード修正 → クレートパッチ → 依存クレートの代替検討 → 限定的なピン留め」の順で検討する。
- 修正時は原因切り分け（`compiler/` 各クレート単位）と、影響範囲の記録を行う。
- 対応内容は `reports/spec-audit/summary.md` とフェーズ 4 の検証記録に明記する。

## ロールバック方針（解決不能時）
- 上記の修正方針で解決できない場合にのみ、`rustup` で前の安定版へ戻す。
- `Cargo.lock` を更新前の状態へ戻し、必要なら限定的に `cargo update -p <crate>@<version>` でピン留めする。
- ロールバック実施の判断と手順を `reports/spec-audit/summary.md` に記録する。

## 例外対応
- どうしても最新ツールチェーンが必要な場合は、特定のクレートにパッチを当てるか、最小限の修正で互換を確保する。

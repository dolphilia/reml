# 4.2 Registry & Distribution（ドラフト）

> 目的：Reml パッケージレジストリおよび配布モデル（分散・中央ハイブリッド）を仕様化し、`reml publish` コマンド・依存解決の基盤を定義する。現状はアウトライン段階。

## 0. 仕様メタデータ

| 項目 | 内容 |
| --- | --- |
| ステータス | 草案（Draft） |
| 参照文書 | [reml-ecosystem-analysis.md](reml-ecosystem-analysis.md) §2, §4.2, §5.2 |
| 関連章 | 3-6, 3-7, 3-8, 4-1 |

## 1. レジストリアーキテクチャ

- 中央レジストリ（`registry.reml-lang.org` 仮称）と分散ミラー構成。
- REST/GraphQL API の方向性、認証方式（PAT/OIDC）。
- 耐障害性と CDN 配信戦略。

## 2. パッケージメタデータ

- `reml.toml` の `project` / `dependencies` / `dsl` 情報をどのように公開するか。
- 署名メタデータ、SBOM、セキュリティ勧告の付与。
- `DslCapabilityProfile`（3-8 §7）との同期。

## 3. 公開ワークフロー

1. `reml publish` 実行時のパイプライン（検証→ビルド→署名→アップロード→検証）。
2. 署名アルゴリズム（Ed25519 予定）と証明書チェーン。
3. アーティファクト再現性（deterministic tarball / lockfile）。

## 4. 配布ポリシー

- 名前空間、転送制御、ライセンス要件。
- プライベート・ミラー・オンプレミス展開のガイドライン。
- リージョンごとのデータ保持とコンプライアンス。

## 5. 検索・リコメンド

- DSL カテゴリ、capability、効果タグに基づく検索フィルタ。
- ダウンロード数、互換性レポート、性能ヒントの公開。

## 6. セキュリティ・監査

- 公開フックと `AuditCapability` を用いた完全証跡。
- 脆弱性通報フロー（registry -> CLI -> manifest）。
- TUF/Update Framework 互換性検討。

## 7. ロードマップ項目

- Phase 2 (6-12ヶ月) での MVP 実装タスク一覧化。
- 将来の AI 支援レビュー、自動互換性チェック（4-3, 4-5 参照）。

> メモ: 詳細な API リファレンス、エラーモデル、サンプルレスポンスは今後追加。Chapter 4 全体の完成度に応じて正式版へ格上げする。

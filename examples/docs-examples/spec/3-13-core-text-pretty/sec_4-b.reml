use Core.Parse
use Core.Text.Pretty

type Parser<T>
type Ast

fn format_with_cst(parser: Parser<Ast>, input: Str) -> Str {
  let result = Parse.run_with_cst(parser, input, RunConfig{})
  match result.value with
  | Some(output) -> {
      let printer = Pretty.cst_printer()
      let doc = Pretty.cst_doc(printer, output.cst)
      Pretty.render(doc, 80)
    }
  | None -> ""
}
